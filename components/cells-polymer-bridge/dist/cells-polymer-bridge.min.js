!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.cellsPolymer=t():e.cellsPolymer=t()}(this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return e[r].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=n(21),o=r(i);window.CellsPolymerBridge=o.default,e.exports=o.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(17),c=r(u),l=20,f=function(e){function t(){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),s(t,[{key:"listenToOnce",value:function(e,t,n){var r=function(){n(),e.removeEventListener(t,r)}.bind(this);e.addEventListener(t,r)}}]),t}(c.default),h=new f;h.setMaxListeners(l),t.default=h},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s=n(1),u=r(s),c=function(e){Rx.ReplaySubject.call(this,e)};c.prototype=Object.create(Rx.ReplaySubject.prototype),a(c.prototype,{onCompleted:function(){},onError:function(e){this.error=e,this.observers.forEach(function(t){t.isStopped=!1,t.onError(e)})},unsubscribe:function(e){this.observers.splice(e,1)},clean:function(){this.q=[]}});var l=function(e){this.node=e,this.subscriptions=[],this.publications=new Rx.CompositeDisposable};l.prototype={node:null,subscriptions:null,publications:null,hasSubscription:function(e){return this.subscriptions.filter(function(t){return t.channel===e}).length>0},publish:function(e){this.publications.add(e)},subscribe:function(e,t){if(!this.hasSubscription(e)){var n=this._firstInstanceOfObserver(t.node,e);n===-1&&(e.subscribe(t),n=e.observers.length-1),e.observers[n].node=t.node;var r={channel:e,observer:e.observers[n]};this.subscriptions.push(r)}},unsubscribe:function(){for(var e=this.subscriptions.length-1;e>=0;e--){var t=this.subscriptions[e],n=t.channel,r=t.observer,i=n.observers.indexOf(r);n.name.match(/\b__bridge_/)||n.unsubscribe(i),n.hasObservers()||n.clean()}this.publications.dispose()},_firstInstanceOfObserver:function(e,t){for(var n=-1,r=0;r<t.observers.length;r++)if(t.observers[r].node===e){n=r;break}return n}};var f=function(){this.channels={}};f.prototype={channels:null,get:function(e){var t=this.channels[e];return null==t&&(t=this.create(e)),t},getUnsafe:function(e){return this.channels[e]},create:function(e){var t=new c(1);return t.name=e,this.channels[e]=t},remove:function(e){delete this.channels[e]},has:function(e){return null!=this.channels[e]}};var h=function(){function e(){i(this,e),this.EventManager=null,this.manager=null,this.subscriptors=null,this.bridgeChannelsPrefix=null,this.manager=new f,this.subscriptors=new WeakMap,this.bridgeChannelsPrefix="__bridge_"}return o(e,[{key:"getSubscriptor",value:function(e){var t=this.subscriptors.get(e);return t||(t=new l(e),this.subscriptors.set(e,t)),t}},{key:"register",value:function(e,t){e&&t&&(this._registerOutConnections(e,t.out),this._registerInConnections(e,t.in))}},{key:"progressiveRegister",value:function(e,t){e&&t&&(this._registerOutConnections(e,t.out),this._updateInConnections(e,t.in))}},{key:"_registerInConnections",value:function(e,t){var n=void 0,r=void 0,i=void 0,o=void 0;if(t)for(n in t)o=this.isBridgeChannel(n)?this.manager.getUnsafe(n):this.manager.get(n),o&&(r=t[n].bind,i=this.getSubscriptor(e),i.subscribe(o,this._wrapCallbackWithNode(e,r)))}},{key:"_updateInConnections",value:function(e,t){var n=void 0,r=void 0,i=void 0,o=void 0;if(t)for(n in t)r=t[n].bind,i=this.getSubscriptor(e),(this.isActiveBridgeChannel(n)||!this.isActiveBridgeChannel(n)&&!this.hasSubscriptions(i,n))&&(o=this.manager.get(n),i.subscribe(o,this._wrapCallbackWithNode(e,r)))}},{key:"_wrapCallbackWithNode",value:function(e,t){var n=this.wrapCallback(e,t);return n.node=e,n}},{key:"_registerOutConnections",value:function(e,t){var n=void 0,r=void 0,i=void 0,o=void 0;if(t)for(n in t)this.isBridgeChannel(n)?console.warn("Forbidden operation. You are trying to write to a private channel ("+n+")."):(r=t[n].bind,i=this.getSubscriptor(e),o=this.manager.get(n),i.publish(this.wrapEvent(e,r,o,t[n])))}},{key:"unregister",value:function(e){if(e){var t=this.subscriptors.get(e);t&&(t.unsubscribe(),this.subscriptors.delete(e))}}},{key:"wrapCallback",value:function(e,t){var n=function(n){"function"==typeof e[t]?e[t](n.detail):e[t]=n.detail};return n}},{key:"wrapEvent",value:function(e,t,n,r){var i=Rx.Observable.fromEvent(e,t),o=i.subscribe(function(e){e.eventPhase===Event.AT_TARGET&&(n.onNext(e),u.default.emit("after-publish",e),r.link&&u.default.emit("nav-request",{event:e,detail:r.link}),r.analytics&&u.default.emit("track-event",{event:e,detail:r.analytics}))}.bind(this));return o}},{key:"createEvent",value:function(e,t){var n=new Event(e);return n.detail={value:t},n}},{key:"isActiveBridgeChannel",value:function(e){return this.isBridgeChannel(e)&&this.manager.getUnsafe(e)}},{key:"isBridgeChannel",value:function(e){return 0===e.indexOf(this.bridgeChannelsPrefix)}},{key:"hasSubscriptions",value:function(e,t){return e.subscriptions.filter(function(e){return e.channel.name===t}).length>0}}]),e}();t.default=h},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(4),c=r(u),l=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.type="",n.spec=null,n.zone=null,n.node=null,n.connections=null,n.spec=e,n.type=e.type,n.zone=e.zone,n.node=n.createElement(n.spec.tagName),n.connections=e.connections,n}return a(t,e),s(t,[{key:"setProps",value:function(){var e=this.spec;if(e.connections&&e.connections.ignoreAttr){var t=!0,n=!1,r=void 0;try{for(var i,o=e.connections.ignoreAttr[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var a=i.value;delete e.properties[a]}}catch(e){n=!0,r=e}finally{try{!t&&o.return&&o.return()}finally{if(n)throw r}}}this.setAttrs(this.node,e.properties)}},{key:"isUnresolved",value:function(){return this.node.tagName.indexOf("-")>-1&&this.node.constructor===HTMLElement}}]),t}(c.default);t.default=l},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(1),c=r(u),l=function(){function e(){i(this,e)}return s(e,[{key:"createComponents",value:function(e){if(e){var t=[],n=0,r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var u=a.value;t[n]=this.createElement(u.tagName),t[n].__zone=u.zone,n++}}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return t}}},{key:"setAttrs",value:function(e,t){t&&"object"===("undefined"==typeof t?"undefined":a(t))&&(c.default.emit("before-set-attr-to-node",e.tagName),o(e,t),c.default.emit("after-set-attr-to-node",e))}},{key:"createElement",value:function(e,t){c.default.emit("before-create-node",e);var n=document.createElement(e);return c.default.emit("after-create-node",n),t&&this.setAttrs(n,t),n}}]),e}();t.default=l},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(6),c=r(u),l=function(e){return(e.familyPath?e.familyPath:e.tag||e.tagName)+"/"+(e.tag||e.tagName)+".html"},f=function(){function e(){o(this,e)}return s(e,[{key:"_buildConfig",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"UI",n={type:e.type?e.type.toUpperCase():t,tagName:e.tag||e.tagName,zone:e.zone,properties:e.properties,path:l(e)};return this.parseConnections(n),n}},{key:"parse",value:function(e){var t=[],n=/^\/(\b)/;t.push.apply(t,i(this._parseComponentsFromJson(e,"components","UI")));var r=e.template;r&&(r=this._buildConfig(r,"TEMPLATE"));var o={},a=e.pages;if(a){var s=!0,u=!1,c=void 0;try{for(var l,f=Object.keys(a)[Symbol.iterator]();!(s=(l=f.next()).done);s=!0){var h=l.value;o[h]="/"+a[h].url.replace(n,"")}}catch(e){u=!0,c=e}finally{try{!s&&f.return&&f.return()}finally{if(u)throw c}}}return{page:e.page,currentPage:e.currentPage||{},template:r,components:t,pages:o}}},{key:"_parseComponentsFromJson",value:function(e,t,n){var r=[],i=e[t];if(Array.isArray(i)){var o=!0,a=!1,s=void 0;try{for(var u,c=i[Symbol.iterator]();!(o=(u=c.next()).done);o=!0){var l=u.value;r.push(this._buildConfig(l,n))}}catch(e){a=!0,s=e}finally{try{!o&&c.return&&c.return()}finally{if(a)throw s}}}return r}},{key:"parseConnections",value:function(e){var t;if(e.properties&&(t=e.properties.cellsConnections),t){if(t.params){t.in||(t.in={}),t.out||(t.out={});var n=this.paramsToActions(t.params);a(t.in,n.in),a(t.out,n.out)}e.connections=t}}},{key:"paramsToActions",value:function(e){var t={in:{},out:{}};for(var n in e){var r=e[n];t.in[r]={bind:n,global:!0},t.out[r]={bind:(0,c.default)(n).dasherize().s+"-changed",global:!0}}return t}},{key:"split",value:function(e){var t;if(e){t={CC:[],UI:[],DM:[]};var n=!0,r=!1,i=void 0;try{for(var o,a=e[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value;t[s.type].push(s)}}catch(e){r=!0,i=e}finally{try{!n&&a.return&&a.return()}finally{if(r)throw i}}}return t}}]),e}();t.default=f},function(e,t,n){var r,i,o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(){"use strict";function a(e,t){null!==t&&void 0!==t?"string"==typeof t?e.s=t:e.s=t.toString():e.s=t,e.orig=t,null!==t&&void 0!==t?e.__defineGetter__?e.__defineGetter__("length",function(){return e.s.length}):e.length=t.length:e.length=-1}function s(e){a(this,e)}function u(){for(var e in _)!function(e){var t=_[e];b.hasOwnProperty(e)||(w.push(e),b[e]=function(){return String.prototype.s=this,t.apply(this,arguments)})}(e)}function c(){for(var e=0;e<w.length;++e)delete String.prototype[w[e]];w.length=0}function l(){for(var e=f(),t={},n=0;n<e.length;++n){var r=e[n];if("to"!==r&&"toEnd"!==r){var i=b[r];try{var a=o(i.apply("teststring"));t[r]=a}catch(e){}}}return t}function f(){var e=[];if(Object.getOwnPropertyNames)return e=Object.getOwnPropertyNames(b),e.splice(e.indexOf("valueOf"),1),e.splice(e.indexOf("toString"),1),e;var t={};for(var n in String.prototype)t[n]=n;for(var n in Object.prototype)delete t[n];for(var n in t)e.push(n);return e}function h(e){return new s(e)}function p(e,t){var n,r=[];for(n=0;n<e.length;n++)r.push(e[n]),t&&t.call(e,e[n],n);return r}function d(e){var t,n,r=[],i=/^[A-Za-z0-9]+$/;for(e=v(e),n=0;n<e.length;++n)t=e.charAt(n),i.test(t)?r.push(t):"\\000"===t?r.push("\\000"):r.push("\\"+t);return r.join("")}function v(e){return null==e?"":""+e}var y="3.3.3",g={},m={"Á":"A","Ă":"A","Ắ":"A","Ặ":"A","Ằ":"A","Ẳ":"A","Ẵ":"A","Ǎ":"A","Â":"A","Ấ":"A","Ậ":"A","Ầ":"A","Ẩ":"A","Ẫ":"A","Ä":"A","Ǟ":"A","Ȧ":"A","Ǡ":"A","Ạ":"A","Ȁ":"A","À":"A","Ả":"A","Ȃ":"A","Ā":"A","Ą":"A","Å":"A","Ǻ":"A","Ḁ":"A","Ⱥ":"A","Ã":"A","Ꜳ":"AA","Æ":"AE","Ǽ":"AE","Ǣ":"AE","Ꜵ":"AO","Ꜷ":"AU","Ꜹ":"AV","Ꜻ":"AV","Ꜽ":"AY","Ḃ":"B","Ḅ":"B","Ɓ":"B","Ḇ":"B","Ƀ":"B","Ƃ":"B","Ć":"C","Č":"C","Ç":"C","Ḉ":"C","Ĉ":"C","Ċ":"C","Ƈ":"C","Ȼ":"C","Ď":"D","Ḑ":"D","Ḓ":"D","Ḋ":"D","Ḍ":"D","Ɗ":"D","Ḏ":"D","ǲ":"D","ǅ":"D","Đ":"D","Ƌ":"D","Ǳ":"DZ","Ǆ":"DZ","É":"E","Ĕ":"E","Ě":"E","Ȩ":"E","Ḝ":"E","Ê":"E","Ế":"E","Ệ":"E","Ề":"E","Ể":"E","Ễ":"E","Ḙ":"E","Ë":"E","Ė":"E","Ẹ":"E","Ȅ":"E","È":"E","Ẻ":"E","Ȇ":"E","Ē":"E","Ḗ":"E","Ḕ":"E","Ę":"E","Ɇ":"E","Ẽ":"E","Ḛ":"E","Ꝫ":"ET","Ḟ":"F","Ƒ":"F","Ǵ":"G","Ğ":"G","Ǧ":"G","Ģ":"G","Ĝ":"G","Ġ":"G","Ɠ":"G","Ḡ":"G","Ǥ":"G","Ḫ":"H","Ȟ":"H","Ḩ":"H","Ĥ":"H","Ⱨ":"H","Ḧ":"H","Ḣ":"H","Ḥ":"H","Ħ":"H","Í":"I","Ĭ":"I","Ǐ":"I","Î":"I","Ï":"I","Ḯ":"I","İ":"I","Ị":"I","Ȉ":"I","Ì":"I","Ỉ":"I","Ȋ":"I","Ī":"I","Į":"I","Ɨ":"I","Ĩ":"I","Ḭ":"I","Ꝺ":"D","Ꝼ":"F","Ᵹ":"G","Ꞃ":"R","Ꞅ":"S","Ꞇ":"T","Ꝭ":"IS","Ĵ":"J","Ɉ":"J","Ḱ":"K","Ǩ":"K","Ķ":"K","Ⱪ":"K","Ꝃ":"K","Ḳ":"K","Ƙ":"K","Ḵ":"K","Ꝁ":"K","Ꝅ":"K","Ĺ":"L","Ƚ":"L","Ľ":"L","Ļ":"L","Ḽ":"L","Ḷ":"L","Ḹ":"L","Ⱡ":"L","Ꝉ":"L","Ḻ":"L","Ŀ":"L","Ɫ":"L","ǈ":"L","Ł":"L","Ǉ":"LJ","Ḿ":"M","Ṁ":"M","Ṃ":"M","Ɱ":"M","Ń":"N","Ň":"N","Ņ":"N","Ṋ":"N","Ṅ":"N","Ṇ":"N","Ǹ":"N","Ɲ":"N","Ṉ":"N","Ƞ":"N","ǋ":"N","Ñ":"N","Ǌ":"NJ","Ó":"O","Ŏ":"O","Ǒ":"O","Ô":"O","Ố":"O","Ộ":"O","Ồ":"O","Ổ":"O","Ỗ":"O","Ö":"O","Ȫ":"O","Ȯ":"O","Ȱ":"O","Ọ":"O","Ő":"O","Ȍ":"O","Ò":"O","Ỏ":"O","Ơ":"O","Ớ":"O","Ợ":"O","Ờ":"O","Ở":"O","Ỡ":"O","Ȏ":"O","Ꝋ":"O","Ꝍ":"O","Ō":"O","Ṓ":"O","Ṑ":"O","Ɵ":"O","Ǫ":"O","Ǭ":"O","Ø":"O","Ǿ":"O","Õ":"O","Ṍ":"O","Ṏ":"O","Ȭ":"O","Ƣ":"OI","Ꝏ":"OO","Ɛ":"E","Ɔ":"O","Ȣ":"OU","Ṕ":"P","Ṗ":"P","Ꝓ":"P","Ƥ":"P","Ꝕ":"P","Ᵽ":"P","Ꝑ":"P","Ꝙ":"Q","Ꝗ":"Q","Ŕ":"R","Ř":"R","Ŗ":"R","Ṙ":"R","Ṛ":"R","Ṝ":"R","Ȑ":"R","Ȓ":"R","Ṟ":"R","Ɍ":"R","Ɽ":"R","Ꜿ":"C","Ǝ":"E","Ś":"S","Ṥ":"S","Š":"S","Ṧ":"S","Ş":"S","Ŝ":"S","Ș":"S","Ṡ":"S","Ṣ":"S","Ṩ":"S","ẞ":"SS","Ť":"T","Ţ":"T","Ṱ":"T","Ț":"T","Ⱦ":"T","Ṫ":"T","Ṭ":"T","Ƭ":"T","Ṯ":"T","Ʈ":"T","Ŧ":"T","Ɐ":"A","Ꞁ":"L","Ɯ":"M","Ʌ":"V","Ꜩ":"TZ","Ú":"U","Ŭ":"U","Ǔ":"U","Û":"U","Ṷ":"U","Ü":"U","Ǘ":"U","Ǚ":"U","Ǜ":"U","Ǖ":"U","Ṳ":"U","Ụ":"U","Ű":"U","Ȕ":"U","Ù":"U","Ủ":"U","Ư":"U","Ứ":"U","Ự":"U","Ừ":"U","Ử":"U","Ữ":"U","Ȗ":"U","Ū":"U","Ṻ":"U","Ų":"U","Ů":"U","Ũ":"U","Ṹ":"U","Ṵ":"U","Ꝟ":"V","Ṿ":"V","Ʋ":"V","Ṽ":"V","Ꝡ":"VY","Ẃ":"W","Ŵ":"W","Ẅ":"W","Ẇ":"W","Ẉ":"W","Ẁ":"W","Ⱳ":"W","Ẍ":"X","Ẋ":"X","Ý":"Y","Ŷ":"Y","Ÿ":"Y","Ẏ":"Y","Ỵ":"Y","Ỳ":"Y","Ƴ":"Y","Ỷ":"Y","Ỿ":"Y","Ȳ":"Y","Ɏ":"Y","Ỹ":"Y","Ź":"Z","Ž":"Z","Ẑ":"Z","Ⱬ":"Z","Ż":"Z","Ẓ":"Z","Ȥ":"Z","Ẕ":"Z","Ƶ":"Z","Ĳ":"IJ","Œ":"OE","ᴀ":"A","ᴁ":"AE","ʙ":"B","ᴃ":"B","ᴄ":"C","ᴅ":"D","ᴇ":"E","ꜰ":"F","ɢ":"G","ʛ":"G","ʜ":"H","ɪ":"I","ʁ":"R","ᴊ":"J","ᴋ":"K","ʟ":"L","ᴌ":"L","ᴍ":"M","ɴ":"N","ᴏ":"O","ɶ":"OE","ᴐ":"O","ᴕ":"OU","ᴘ":"P","ʀ":"R","ᴎ":"N","ᴙ":"R","ꜱ":"S","ᴛ":"T","ⱻ":"E","ᴚ":"R","ᴜ":"U","ᴠ":"V","ᴡ":"W","ʏ":"Y","ᴢ":"Z","á":"a","ă":"a","ắ":"a","ặ":"a","ằ":"a","ẳ":"a","ẵ":"a","ǎ":"a","â":"a","ấ":"a","ậ":"a","ầ":"a","ẩ":"a","ẫ":"a","ä":"a","ǟ":"a","ȧ":"a","ǡ":"a","ạ":"a","ȁ":"a","à":"a","ả":"a","ȃ":"a","ā":"a","ą":"a","ᶏ":"a","ẚ":"a","å":"a","ǻ":"a","ḁ":"a","ⱥ":"a","ã":"a","ꜳ":"aa","æ":"ae","ǽ":"ae","ǣ":"ae","ꜵ":"ao","ꜷ":"au","ꜹ":"av","ꜻ":"av","ꜽ":"ay","ḃ":"b","ḅ":"b","ɓ":"b","ḇ":"b","ᵬ":"b","ᶀ":"b","ƀ":"b","ƃ":"b","ɵ":"o","ć":"c","č":"c","ç":"c","ḉ":"c","ĉ":"c","ɕ":"c","ċ":"c","ƈ":"c","ȼ":"c","ď":"d","ḑ":"d","ḓ":"d","ȡ":"d","ḋ":"d","ḍ":"d","ɗ":"d","ᶑ":"d","ḏ":"d","ᵭ":"d","ᶁ":"d","đ":"d","ɖ":"d","ƌ":"d","ı":"i","ȷ":"j","ɟ":"j","ʄ":"j","ǳ":"dz","ǆ":"dz","é":"e","ĕ":"e","ě":"e","ȩ":"e","ḝ":"e","ê":"e","ế":"e","ệ":"e","ề":"e","ể":"e","ễ":"e","ḙ":"e","ë":"e","ė":"e","ẹ":"e","ȅ":"e","è":"e","ẻ":"e","ȇ":"e","ē":"e","ḗ":"e","ḕ":"e","ⱸ":"e","ę":"e","ᶒ":"e","ɇ":"e","ẽ":"e","ḛ":"e","ꝫ":"et","ḟ":"f","ƒ":"f","ᵮ":"f","ᶂ":"f","ǵ":"g","ğ":"g","ǧ":"g","ģ":"g","ĝ":"g","ġ":"g","ɠ":"g","ḡ":"g","ᶃ":"g","ǥ":"g","ḫ":"h","ȟ":"h","ḩ":"h","ĥ":"h","ⱨ":"h","ḧ":"h","ḣ":"h","ḥ":"h","ɦ":"h","ẖ":"h","ħ":"h","ƕ":"hv","í":"i","ĭ":"i","ǐ":"i","î":"i","ï":"i","ḯ":"i","ị":"i","ȉ":"i","ì":"i","ỉ":"i","ȋ":"i","ī":"i","į":"i","ᶖ":"i","ɨ":"i","ĩ":"i","ḭ":"i","ꝺ":"d","ꝼ":"f","ᵹ":"g","ꞃ":"r","ꞅ":"s","ꞇ":"t","ꝭ":"is","ǰ":"j","ĵ":"j","ʝ":"j","ɉ":"j","ḱ":"k","ǩ":"k","ķ":"k","ⱪ":"k","ꝃ":"k","ḳ":"k","ƙ":"k","ḵ":"k","ᶄ":"k","ꝁ":"k","ꝅ":"k","ĺ":"l","ƚ":"l","ɬ":"l","ľ":"l","ļ":"l","ḽ":"l","ȴ":"l","ḷ":"l","ḹ":"l","ⱡ":"l","ꝉ":"l","ḻ":"l","ŀ":"l","ɫ":"l","ᶅ":"l","ɭ":"l","ł":"l","ǉ":"lj","ſ":"s","ẜ":"s","ẛ":"s","ẝ":"s","ḿ":"m","ṁ":"m","ṃ":"m","ɱ":"m","ᵯ":"m","ᶆ":"m","ń":"n","ň":"n","ņ":"n","ṋ":"n","ȵ":"n","ṅ":"n","ṇ":"n","ǹ":"n","ɲ":"n","ṉ":"n","ƞ":"n","ᵰ":"n","ᶇ":"n","ɳ":"n","ñ":"n","ǌ":"nj","ó":"o","ŏ":"o","ǒ":"o","ô":"o","ố":"o","ộ":"o","ồ":"o","ổ":"o","ỗ":"o","ö":"o","ȫ":"o","ȯ":"o","ȱ":"o","ọ":"o","ő":"o","ȍ":"o","ò":"o","ỏ":"o","ơ":"o","ớ":"o","ợ":"o","ờ":"o","ở":"o","ỡ":"o","ȏ":"o","ꝋ":"o","ꝍ":"o","ⱺ":"o","ō":"o","ṓ":"o","ṑ":"o","ǫ":"o","ǭ":"o","ø":"o","ǿ":"o","õ":"o","ṍ":"o","ṏ":"o","ȭ":"o","ƣ":"oi","ꝏ":"oo","ɛ":"e","ᶓ":"e","ɔ":"o","ᶗ":"o","ȣ":"ou","ṕ":"p","ṗ":"p","ꝓ":"p","ƥ":"p","ᵱ":"p","ᶈ":"p","ꝕ":"p","ᵽ":"p","ꝑ":"p","ꝙ":"q","ʠ":"q","ɋ":"q","ꝗ":"q","ŕ":"r","ř":"r","ŗ":"r","ṙ":"r","ṛ":"r","ṝ":"r","ȑ":"r","ɾ":"r","ᵳ":"r","ȓ":"r","ṟ":"r","ɼ":"r","ᵲ":"r","ᶉ":"r","ɍ":"r","ɽ":"r","ↄ":"c","ꜿ":"c","ɘ":"e","ɿ":"r","ś":"s","ṥ":"s","š":"s","ṧ":"s","ş":"s","ŝ":"s","ș":"s","ṡ":"s","ṣ":"s","ṩ":"s","ʂ":"s","ᵴ":"s","ᶊ":"s","ȿ":"s","ɡ":"g","ß":"ss","ᴑ":"o","ᴓ":"o","ᴝ":"u","ť":"t","ţ":"t","ṱ":"t","ț":"t","ȶ":"t","ẗ":"t","ⱦ":"t","ṫ":"t","ṭ":"t","ƭ":"t","ṯ":"t","ᵵ":"t","ƫ":"t","ʈ":"t","ŧ":"t","ᵺ":"th","ɐ":"a","ᴂ":"ae","ǝ":"e","ᵷ":"g","ɥ":"h","ʮ":"h","ʯ":"h","ᴉ":"i","ʞ":"k","ꞁ":"l","ɯ":"m","ɰ":"m","ᴔ":"oe","ɹ":"r","ɻ":"r","ɺ":"r","ⱹ":"r","ʇ":"t","ʌ":"v","ʍ":"w","ʎ":"y","ꜩ":"tz","ú":"u","ŭ":"u","ǔ":"u","û":"u","ṷ":"u","ü":"u","ǘ":"u","ǚ":"u","ǜ":"u","ǖ":"u","ṳ":"u","ụ":"u","ű":"u","ȕ":"u","ù":"u","ủ":"u","ư":"u","ứ":"u","ự":"u","ừ":"u","ử":"u","ữ":"u","ȗ":"u","ū":"u","ṻ":"u","ų":"u","ᶙ":"u","ů":"u","ũ":"u","ṹ":"u","ṵ":"u","ᵫ":"ue","ꝸ":"um","ⱴ":"v","ꝟ":"v","ṿ":"v","ʋ":"v","ᶌ":"v","ⱱ":"v","ṽ":"v","ꝡ":"vy","ẃ":"w","ŵ":"w","ẅ":"w","ẇ":"w","ẉ":"w","ẁ":"w","ⱳ":"w","ẘ":"w","ẍ":"x","ẋ":"x","ᶍ":"x","ý":"y","ŷ":"y","ÿ":"y","ẏ":"y","ỵ":"y","ỳ":"y","ƴ":"y","ỷ":"y","ỿ":"y","ȳ":"y","ẙ":"y","ɏ":"y","ỹ":"y","ź":"z","ž":"z","ẑ":"z","ʑ":"z","ⱬ":"z","ż":"z","ẓ":"z","ȥ":"z","ẕ":"z","ᵶ":"z","ᶎ":"z","ʐ":"z","ƶ":"z","ɀ":"z","ﬀ":"ff","ﬃ":"ffi","ﬄ":"ffl","ﬁ":"fi","ﬂ":"fl","ĳ":"ij","œ":"oe","ﬆ":"st","ₐ":"a","ₑ":"e","ᵢ":"i","ⱼ":"j","ₒ":"o","ᵣ":"r","ᵤ":"u","ᵥ":"v","ₓ":"x"},b=String.prototype,_=s.prototype={between:function(e,t){var n=this.s,r=n.indexOf(e),i=n.indexOf(t,r+e.length);return i==-1&&null!=t?new this.constructor(""):i==-1&&null==t?new this.constructor(n.substring(r+e.length)):new this.constructor(n.slice(r+e.length,i))},camelize:function(){var e=this.trim().s.replace(/(\-|_|\s)+(.)?/g,function(e,t,n){return n?n.toUpperCase():""});return new this.constructor(e)},capitalize:function(){return new this.constructor(this.s.substr(0,1).toUpperCase()+this.s.substring(1).toLowerCase())},charAt:function(e){return this.s.charAt(e)},chompLeft:function(e){var t=this.s;return 0===t.indexOf(e)?(t=t.slice(e.length),new this.constructor(t)):this},chompRight:function(e){if(this.endsWith(e)){var t=this.s;return t=t.slice(0,t.length-e.length),new this.constructor(t)}return this},collapseWhitespace:function(){var e=this.s.replace(/[\s\xa0]+/g," ").replace(/^\s+|\s+$/g,"");return new this.constructor(e)},contains:function(e){return this.s.indexOf(e)>=0},count:function(e){return n(18)(this.s,e)},dasherize:function(){var e=this.trim().s.replace(/[_\s]+/g,"-").replace(/([A-Z])/g,"-$1").replace(/-+/g,"-").toLowerCase();return new this.constructor(e)},equalsIgnoreCase:function(e){var t=this.s;return t.toLowerCase()==e.toLowerCase()},latinise:function(){var e=this.replace(/[^A-Za-z0-9\[\] ]/g,function(e){return m[e]||e});return new this.constructor(e)},decodeHtmlEntities:function(){var e=this.s;return e=e.replace(/&#(\d+);?/g,function(e,t){return String.fromCharCode(t)}).replace(/&#[xX]([A-Fa-f0-9]+);?/g,function(e,t){return String.fromCharCode(parseInt(t,16))}).replace(/&([^;\W]+;?)/g,function(e,t){var n=t.replace(/;$/,""),r=g[t]||t.match(/;$/)&&g[n];return"number"==typeof r?String.fromCharCode(r):"string"==typeof r?r:e}),new this.constructor(e)},endsWith:function(){for(var e=Array.prototype.slice.call(arguments,0),t=0;t<e.length;++t){var n=this.s.length-e[t].length;if(n>=0&&this.s.indexOf(e[t],n)===n)return!0}return!1},escapeHTML:function(){return new this.constructor(this.s.replace(/[&<>"']/g,function(e){return"&"+k[e]+";"}))},ensureLeft:function(e){var t=this.s;return 0===t.indexOf(e)?this:new this.constructor(e+t)},ensureRight:function(e){var t=this.s;return this.endsWith(e)?this:new this.constructor(t+e)},humanize:function(){if(null===this.s||void 0===this.s)return new this.constructor("");var e=this.underscore().replace(/_id$/,"").replace(/_/g," ").trim().capitalize();return new this.constructor(e)},isAlpha:function(){return!/[^a-z\xDF-\xFF]|^$/.test(this.s.toLowerCase())},isAlphaNumeric:function(){return!/[^0-9a-z\xDF-\xFF]/.test(this.s.toLowerCase())},isEmpty:function(){return null===this.s||void 0===this.s||/^[\s\xa0]*$/.test(this.s)},isLower:function(){return this.isAlpha()&&this.s.toLowerCase()===this.s},isNumeric:function(){return!/[^0-9]/.test(this.s)},isUpper:function(){return this.isAlpha()&&this.s.toUpperCase()===this.s},left:function(e){if(e>=0){var t=this.s.substr(0,e);return new this.constructor(t)}return this.right(-e)},lines:function(){return this.replaceAll("\r\n","\n").s.split("\n")},pad:function(e,t){if(null==t&&(t=" "),this.s.length>=e)return new this.constructor(this.s);e-=this.s.length;var n=Array(Math.ceil(e/2)+1).join(t),r=Array(Math.floor(e/2)+1).join(t);return new this.constructor(n+this.s+r)},padLeft:function(e,t){return null==t&&(t=" "),this.s.length>=e?new this.constructor(this.s):new this.constructor(Array(e-this.s.length+1).join(t)+this.s)},padRight:function(e,t){return null==t&&(t=" "),this.s.length>=e?new this.constructor(this.s):new this.constructor(this.s+Array(e-this.s.length+1).join(t))},parseCSV:function(e,t,n,r){e=e||",",n=n||"\\","undefined"==typeof t&&(t='"');var i=0,o=[],a=[],s=this.s.length,u=!1,c=!1,l=this,f=function(e){return l.s.charAt(e)};if("undefined"!=typeof r)var h=[];for(t||(u=!0);i<s;){var p=f(i);switch(p){case n:if(u&&(n!==t||f(i+1)===t)){i+=1,o.push(f(i));break}if(n!==t)break;case t:u=!u;break;case e:c&&(u=!1,c=!1),u&&t?o.push(p):(a.push(o.join("")),o.length=0);break;case r:c?(u=!1,c=!1,a.push(o.join("")),h.push(a),a=[],o.length=0):u?o.push(p):h&&(a.push(o.join("")),h.push(a),a=[],o.length=0);break;case" ":u&&o.push(p);break;default:u?o.push(p):p!==t&&(o.push(p),u=!0,c=!0)}i+=1}return a.push(o.join("")),h?(h.push(a),h):a},replaceAll:function(e,t){var n=this.s.split(e).join(t);return new this.constructor(n)},splitLeft:function(e,t,r){return n(19)(this.s,e,t,r)},splitRight:function(e,t,r){return n(20)(this.s,e,t,r)},strip:function(){for(var e=this.s,t=0,n=arguments.length;t<n;t++)e=e.split(arguments[t]).join("");return new this.constructor(e)},stripLeft:function(e){var t,n,r=v(this.s);return void 0===e?n=/^\s+/g:(t=d(e),n=new RegExp("^["+t+"]+","g")),new this.constructor(r.replace(n,""))},stripRight:function(e){var t,n,r=v(this.s);return void 0===e?n=/\s+$/g:(t=d(e),n=new RegExp("["+t+"]+$","g")),new this.constructor(r.replace(n,""))},right:function(e){if(e>=0){var t=this.s.substr(this.s.length-e,e);return new this.constructor(t)}return this.left(-e)},setValue:function(e){return a(this,e),this},slugify:function(){var e=new s(new s(this.s).latinise().s.replace(/[^\w\s-]/g,"").toLowerCase()).dasherize().s;return"-"===e.charAt(0)&&(e=e.substr(1)),new this.constructor(e)},startsWith:function(){for(var e=Array.prototype.slice.call(arguments,0),t=0;t<e.length;++t)if(0===this.s.lastIndexOf(e[t],0))return!0;return!1},stripPunctuation:function(){return new this.constructor(this.s.replace(/[^\w\s]|_/g,"").replace(/\s+/g," "))},stripTags:function(){var e=this.s,t=arguments.length>0?arguments:[""];return p(t,function(t){e=e.replace(RegExp("</?"+t+"[^<>]*>","gi"),"")}),new this.constructor(e)},template:function(e,t,n){var r=this.s,t=t||h.TMPL_OPEN,n=n||h.TMPL_CLOSE,i=t.replace(/[-[\]()*\s]/g,"\\$&").replace(/\$/g,"\\$"),o=n.replace(/[-[\]()*\s]/g,"\\$&").replace(/\$/g,"\\$"),a=new RegExp(i+"(.+?)"+o,"g"),s=r.match(a)||[];return s.forEach(function(i){var o=i.substring(t.length,i.length-n.length).trim(),a="undefined"==typeof e[o]?"":e[o];r=r.replace(i,a)}),new this.constructor(r)},times:function(e){return new this.constructor(new Array(e+1).join(this.s))},titleCase:function(){var e=this.s;return e&&(e=e.replace(/(^[a-z]| [a-z]|-[a-z]|_[a-z])/g,function(e){return e.toUpperCase()})),new this.constructor(e)},toBoolean:function(){if("string"==typeof this.orig){var e=this.s.toLowerCase();return"true"===e||"yes"===e||"on"===e||"1"===e}return this.orig===!0||1===this.orig},toFloat:function(e){var t=parseFloat(this.s);return e?parseFloat(t.toFixed(e)):t},toInt:function(){return/^\s*-?0x/i.test(this.s)?parseInt(this.s,16):parseInt(this.s,10)},trim:function(){var e;return e="undefined"==typeof b.trim?this.s.replace(/(^\s*|\s*$)/g,""):this.s.trim(),new this.constructor(e)},trimLeft:function(){var e;return e=b.trimLeft?this.s.trimLeft():this.s.replace(/(^\s*)/g,""),new this.constructor(e)},trimRight:function(){var e;return e=b.trimRight?this.s.trimRight():this.s.replace(/\s+$/,""),new this.constructor(e)},truncate:function(e,t){var n=this.s;if(e=~~e,t=t||"...",n.length<=e)return new this.constructor(n);var r=function(e){return e.toUpperCase()!==e.toLowerCase()?"A":" "},i=n.slice(0,e+1).replace(/.(?=\W*\w*$)/g,r);return i=i.slice(i.length-2).match(/\w\w/)?i.replace(/\s*\S+$/,""):new s(i.slice(0,i.length-1)).trimRight().s,new s((i+t).length>n.length?n:n.slice(0,i.length)+t)},toCSV:function(){function e(e){return null!==e&&""!==e}var t=",",n='"',r="\\",i=!0,a=!1,u=[];if("object"===o(arguments[0])?(t=arguments[0].delimiter||t,t=arguments[0].separator||t,n=arguments[0].qualifier||n,i=!!arguments[0].encloseNumbers,r=arguments[0].escape||r,a=!!arguments[0].keys):"string"==typeof arguments[0]&&(t=arguments[0]),"string"==typeof arguments[1]&&(n=arguments[1]),null===arguments[1]&&(n=null),this.orig instanceof Array)u=this.orig;else for(var c in this.orig)this.orig.hasOwnProperty(c)&&(a?u.push(c):u.push(this.orig[c]));for(var l=r+n,f=[],h=0;h<u.length;++h){var p=e(n);if("number"==typeof u[h]&&(p&=i),p&&f.push(n),null!==u[h]&&void 0!==u[h]){var d=new s(u[h]).replaceAll(n,l).s;f.push(d)}else f.push("");p&&f.push(n),t&&f.push(t)}return f.length=f.length-1,new this.constructor(f.join(""))},toString:function(){return this.s},underscore:function(){var e=this.trim().s.replace(/([a-z\d])([A-Z]+)/g,"$1_$2").replace(/([A-Z\d]+)([A-Z][a-z])/g,"$1_$2").replace(/[-\s]+/g,"_").toLowerCase();return new this.constructor(e)},unescapeHTML:function(){return new this.constructor(this.s.replace(/\&([^;]+);/g,function(e,t){var n;return t in P?P[t]:(n=t.match(/^#x([\da-fA-F]+)$/))?String.fromCharCode(parseInt(n[1],16)):(n=t.match(/^#(\d+)$/))?String.fromCharCode(~~n[1]):e}))},valueOf:function(){return this.s.valueOf()},wrapHTML:function(e,t){var n=this.s,r=null==e?"span":e,i="",a="";if("object"==("undefined"==typeof t?"undefined":o(t)))for(var s in t)i+=" "+s+'="'+new this.constructor(t[s]).escapeHTML()+'"';return n=a.concat("<",r,i,">",this,"</",r,">"),new this.constructor(n)}},w=[],C=l();for(var O in C)!function(e){var t=b[e];"function"==typeof t&&(_[e]||("string"===C[e]?_[e]=function(){return new this.constructor(t.apply(this,arguments))}:_[e]=t))}(O);_.repeat=_.times,_.include=_.contains,_.toInteger=_.toInt,_.toBool=_.toBoolean,_.decodeHTMLEntities=_.decodeHtmlEntities,_.constructor=s,h.extendPrototype=u,h.restorePrototype=c,h.VERSION=y,h.TMPL_OPEN="{{",h.TMPL_CLOSE="}}",h.ENTITIES=g,"undefined"!=typeof e&&"undefined"!=typeof e.exports?e.exports=h:(r=[],i=function(){return h}.apply(t,r),!(void 0!==i&&(e.exports=i)));var P={lt:"<",gt:">",quot:'"',apos:"'",amp:"&"},k={};for(var E in P)k[P[E]]=E;g={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,"OElig;":338,"oelig;":339,"Scaron;":352,"scaron;":353,"Yuml;":376,"fnof;":402,"circ;":710,"tilde;":732,"Alpha;":913,"Beta;":914,"Gamma;":915,"Delta;":916,"Epsilon;":917,"Zeta;":918,"Eta;":919,"Theta;":920,"Iota;":921,"Kappa;":922,"Lambda;":923,"Mu;":924,"Nu;":925,"Xi;":926,"Omicron;":927,"Pi;":928,"Rho;":929,"Sigma;":931,"Tau;":932,"Upsilon;":933,
"Phi;":934,"Chi;":935,"Psi;":936,"Omega;":937,"alpha;":945,"beta;":946,"gamma;":947,"delta;":948,"epsilon;":949,"zeta;":950,"eta;":951,"theta;":952,"iota;":953,"kappa;":954,"lambda;":955,"mu;":956,"nu;":957,"xi;":958,"omicron;":959,"pi;":960,"rho;":961,"sigmaf;":962,"sigma;":963,"tau;":964,"upsilon;":965,"phi;":966,"chi;":967,"psi;":968,"omega;":969,"thetasym;":977,"upsih;":978,"piv;":982,"ensp;":8194,"emsp;":8195,"thinsp;":8201,"zwnj;":8204,"zwj;":8205,"lrm;":8206,"rlm;":8207,"ndash;":8211,"mdash;":8212,"lsquo;":8216,"rsquo;":8217,"sbquo;":8218,"ldquo;":8220,"rdquo;":8221,"bdquo;":8222,"dagger;":8224,"Dagger;":8225,"bull;":8226,"hellip;":8230,"permil;":8240,"prime;":8242,"Prime;":8243,"lsaquo;":8249,"rsaquo;":8250,"oline;":8254,"frasl;":8260,"euro;":8364,"image;":8465,"weierp;":8472,"real;":8476,"trade;":8482,"alefsym;":8501,"larr;":8592,"uarr;":8593,"rarr;":8594,"darr;":8595,"harr;":8596,"crarr;":8629,"lArr;":8656,"uArr;":8657,"rArr;":8658,"dArr;":8659,"hArr;":8660,"forall;":8704,"part;":8706,"exist;":8707,"empty;":8709,"nabla;":8711,"isin;":8712,"notin;":8713,"ni;":8715,"prod;":8719,"sum;":8721,"minus;":8722,"lowast;":8727,"radic;":8730,"prop;":8733,"infin;":8734,"ang;":8736,"and;":8743,"or;":8744,"cap;":8745,"cup;":8746,"int;":8747,"there4;":8756,"sim;":8764,"cong;":8773,"asymp;":8776,"ne;":8800,"equiv;":8801,"le;":8804,"ge;":8805,"sub;":8834,"sup;":8835,"nsub;":8836,"sube;":8838,"supe;":8839,"oplus;":8853,"otimes;":8855,"perp;":8869,"sdot;":8901,"lceil;":8968,"rceil;":8969,"lfloor;":8970,"rfloor;":8971,"lang;":9001,"rang;":9002,"loz;":9674,"spades;":9824,"clubs;":9827,"hearts;":9829,"diams;":9830}}.call(void 0)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(6),c=r(u),l=n(4),f=r(l),h=n(11),p=r(h),d=n(2),v=r(d),y=n(15),g=r(y),m=n(5),b=r(m),_=n(1),w=r(_),C=n(10),O=r(C),P=n(13),k=r(P),E=n(3),A=r(E),x=n(9),S=r(x),j=0,T={},R=function(){function e(t){i(this,e),this.ComponentConnector=null,this.DomManager=null,this.ImportManager=null,this.PageManager=null,this.Router=null,this.TemplateManager=null,this.Sanitizer=null,this.BridgeChannelManager=null,this.binding="always",this.cache=!0,this.channel="global",this.componentsPath="",this.crossContainerId="__cross",this.debug=!0,this.preCache=!0,this.preRender=!1,this.storagePrefix="__bridge-",this.version="0.3.1",this.viewLimit=6,this.externalEvents=["page-ready","parse-route","after-publish","nav-request","before-set-attr-to-node","after-set-attr-to-node","before-create-node","after-create-node","before-import","after-import","page-request","page-response","data-load","template-transition-end","track-event"],t&&"object"===("undefined"==typeof t?"undefined":a(t))||(t={});var n=t.dependencies;delete t.dependencies,o(this,t),this.mainNode?this._plugExternalEvents():console.warn("You should indicate the main node of your app"),this._initDependencies(n),this.id=j++,this._initCrossComponents(),"global"===this.channel&&(this.ComponentConnector.manager.channels=T),this.cache&&(this.PageManager.persistent=!0),this.generateRequestUrl&&(console.assert("function"==typeof this.generateRequestUrl,"generateRequestUrl has to be a function"),this.PageManager.generateRequestUrl=this.generateRequestUrl),this.debug&&(window.$core=window.$core||[],window.$core.push(this),this.printDebugInfo()),this.BridgeChannelManager.initAppContextChannel(),this.Router.handler=this.routeHandler.bind(this),this.Router.addRoutes(this.routes),this.Router.start(),w.default.on("nav-request",function(e){var n=e.event,r=e.detail,i=r.page,a=r.params,s={};if(!i&&r.paramPage&&n.detail&&(i=n.detail[r.paramPage]),n.detail&&a)for(var u in a)a.hasOwnProperty(u)&&(s[a[u]]=n.detail[u]);this.Router.go(i,s),o(this,t)}.bind(this))}return s(e,[{key:"_plugExternalEvents",value:function(){var e=this,t=this.externalEvents.length,n=document.querySelector("#"+this.mainNode),r=function(e,t){var r=t?new CustomEvent(e,{detail:t}):new CustomEvent(e);n.dispatchEvent(r)};if(n)for(var i=function(t){w.default.on(e.externalEvents[t],function(n){r(e.externalEvents[t],n)})},o=0;o<t;o++)i(o);else console.warn("The defined main node does not exist")}},{key:"_initCrossComponents",value:function(){var e=this.TemplateManager.create(this.crossContainerId,{tagName:"div"});document.body.appendChild(e.node)}},{key:"_initDependencies",value:function(e){e=o({ComponentConnector:v.default,DomManager:f.default,ImportManager:O.default,PageManager:p.default,TemplateManager:k.default,Router:g.default,Sanitizer:b.default,BridgeChannelManager:S.default},e);for(var t in e)e.hasOwnProperty(t)&&(this[t]=new e[t](this))}},{key:"createCCComponent",value:function(e){var t=this.TemplateManager.get(this.crossContainerId),n=t.node.querySelector(e.tagName);if(!n){var r=new A.default(e,this);return r.__parentTemplate=t,this.ComponentConnector.register(r.node,r.spec.connections),r}this.ComponentConnector.progressiveRegister(n,e.connections)}},{key:"createUIComponent",value:function(e){var t=this.binding,n=new A.default(e,this);return"always"!==t&&"delayed"!==t&&"ui"!==t||this.ComponentConnector.register(n.node,n.connections),n}},{key:"createDMComponent",value:function(e){var t=this.binding,n=new A.default(e,this);return"always"!==t&&"delayed"!==t||this.ComponentConnector.register(n.node,n.connections),n}},{key:"_createLocalComponent",value:function(e,t,n){for(var r=[],i=0,o=t.length;i<o;i++){var a=t[i],s=this["create"+e+"Component"](a);s&&(s.__parentTemplate=s.__parentTemplate||n,r.push(s))}return r}},{key:"createComponentsByType",value:function(e,t){for(var n=[],r=["CC","UI","DM"],i=0,o=r.length;i<o;i++){var a=r[i],s=e[a];n=n.concat(this._createLocalComponent(a,s,t))}return n}},{key:"_createComponents",value:function(e,t){for(var n=this,r=this.Sanitizer.split(e.components),i=this.createComponentsByType(r,t),o=0,a=i.length;o<a;o++)i[o].setProps();var s=[];for(o=0,a=i.length;o<a;o++){var u=i[o];this.TemplateManager.get(u.__parentTemplate.name).append(u),u.isUnresolved()&&s.push(u)}w.default.emit("page-ready"),this.ImportManager.loadComponent(s,this.selectTemplate.bind(this,e.page),n.componentsPath)}},{key:"loadTemplate",value:function(e,t){var n=this;return this.PageManager.get(e,{cache:n.cache,params:t,method:n.method,body:n.body,headers:n.headers})}},{key:"createTemplate",value:function(e){var t=e,n=e.page,r=this.TemplateManager.getNode(n);if(this.BridgeChannelManager.getPrivate(n),r)this.selectTemplate(n);else{if(t&&t.template){var i=this.TemplateManager.create(n,t.template);this.ComponentConnector.register(i.node,i.connections),t.pages&&this.Router.addRoutes(t.pages),i.isUnresolved()?this.ImportManager.loadComponent(i,this._createComponents.bind(this,e,i),this.componentsPath):this._createComponents.call(this,e,i)}if(this.preCache!==!1&&e.pages)for(var o in e.pages)this.loadTemplate(o).then(function(){})}}},{key:"parseTemplateId",value:function(e){return"cells-template-"+e.replace(/\./g,"-")}},{key:"parse",value:function(e,t){return e=(0,c.default)("parse-"+e).camelize().s,"function"==typeof this[e]?this[e](t):t}},{key:"printDebugInfo",value:function(){var e=function(e,t){var n=e?t:"#b0bec5";return"background:"+n+"; color:#fff; padding:2px 4px; margin-right: 5px;"};console.log("%cbridge version: "+this.version+" %cbinding: "+this.binding+" %ccache: "+this.cache+" %cpreCache: "+this.preCache+" %cpreRender: "+this.preRender,e(this.version,"#003f8d"),e(this.binding,"#0065ba"),e(this.cache,"#0093e2"),e(this.preCache,"#00aeeb"),e(this.preRender,"#41cef8"))}},{key:"routeHandler",value:function(){var e=this.Router.currentRoute;w.default.emit("parse-route",e),this.loadTemplate(e.name,e.params).then(this.createTemplate.bind(this));for(var t in e.params)if(e.params.hasOwnProperty(t)){var n={detail:{value:e.params[t]},type:(0,c.default)(t).dasherize().s+"-changed"};this.ComponentConnector.manager.get(t).onNext(n)}}},{key:"registerCurrentTemplate",value:function(e,t){var n=this;this.registerChildren(e,"ui"===n.binding?"DM":null),t&&t!==e&&this.unregisterChildren(t,"ui"===n.binding?"DM":null)}},{key:"registerChildren",value:function(e,t){var n=!0,r=!1,i=void 0;try{for(var o,a=e.children[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value;(t&&t===s.type||!t)&&this.ComponentConnector.register(s.node,s.connections)}}catch(e){r=!0,i=e}finally{try{!n&&a.return&&a.return()}finally{if(r)throw i}}}},{key:"unregisterChildren",value:function(e,t){var n=!0,r=!1,i=void 0;try{for(var o,a=e.children[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value;(t&&t===s.type||!t)&&this.ComponentConnector.unregister(s.node)}}catch(e){r=!0,i=e}finally{try{!n&&a.return&&a.return()}finally{if(r)throw i}}}},{key:"selectTemplate",value:function(e){var t=this,n=this.TemplateManager.get(e);if("currentview"===t.binding||"ui"===t.binding){var r=this.registerCurrentTemplate.bind(this,n,this.TemplateManager.get(this.TemplateManager.selected));n.node.animationCompleteEvent?w.default.listenToOnce(n.node,n.node.animationCompleteEvent,r):w.default.once("template-transition-end",r)}t.onRender&&t.onRender(n.node);var i=this.TemplateManager.select.bind(this.TemplateManager,e,this.BridgeChannelManager);"delayed"===t.binding?this._idleCallback(i):i()}},{key:"_idleCallback",value:function(e){setTimeout(function(){"requestIdleCallback"in window?window.requestIdleCallback(e):setTimeout(e,1)},100)}}]),e}();t.default=R},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(){n(this,e)}return r(e,[{key:"getJSON",value:function(e){return new Promise(function(t,n){var r=new XMLHttpRequest;e&&e.url||n(new Error("URL not defined"));var i=(e.method||"").toUpperCase()||"GET";r.addEventListener("load",function(e){var r=e.target,i=r.status;i>=200&&i<300||0==i&&r.responseText.length>0?t(JSON.parse(r.response)):n(new Error(r.statusText))}),r.addEventListener("error",function(){n(new Error("Network Error"))}),r.open(i,e.url);var o=e.headers;for(var a in o)o.hasOwnProperty(a)&&r.setRequestHeader(a,o[a]);r.send(e.body)})}},{key:"_onErrorCallback",value:function(){this.reject(new Error("Network Error"))}},{key:"_onLoadCallback",value:function(){var e=this.xhr,t=e.status;t>=200&&t<300||0==t&&e.responseText.length>0?this.resolve(JSON.parse(e.response)):this.reject(new Error(e.statusText))}}]),e}();t.default=i},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(t){n(this,e),this.componentConnector=t.ComponentConnector,this.privateChannels=new Set}return r(e,[{key:"getAppContextChannelName",value:function(){return"__bridge_app"}},{key:"getPrivateChannelPrefix",value:function(){return"__bridge_page_"}},{key:"getAppContextChannel",value:function(){return this.componentConnector.manager.get(this.getAppContextChannelName())}},{key:"getPrivate",value:function(e){var t=this.getPrivateChannelPrefix()+e,n=this.componentConnector.manager.get(t);return this.privateChannels.add(t),n}},{key:"initAppContextChannel",value:function(){this.getAppContextChannel()}},{key:"initPrivateChannel",value:function(e,t){var n=void 0,r=void 0,i=void 0,o=void 0;e&&(n=this.getPrivateChannelPrefix()+e,i=this.componentConnector.manager.get(n),o=this.componentConnector.createEvent("page-load",!1),i.onNext(o)),r=this.getPrivateChannelPrefix()+t,i=this.componentConnector.manager.get(r),o=this.componentConnector.createEvent("page-load",!0),i.onNext(o)}},{key:"updateAppContext",value:function(e,t){var n=this.componentConnector.createEvent("page-load",{currentPage:t,fromPage:e});this.getAppContextChannel().onNext(n)}},{key:"isPrivateChannel",value:function(e){return 0===e.indexOf(this.getPrivateChannelPrefix())}},{key:"isActivePrivateChannel",value:function(e){return this.privateChannels.has(e)}}]),e}();t.default=i},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(1),u=r(s),c=function(e,t){return function(){if(--e<1)return t()}},l=function(){function e(){i(this,e)}return a(e,[{key:"_importElement",value:function(e,t,n){var r=document.createElement("link");o(r,{rel:"import",async:!0,href:e+t.spec.path,onload:n,onerror:n}),document.head.appendChild(r)}},{key:"loadComponent",value:function(e,t,n){var r=this,i=e;if(Array.isArray(i)||(i=[e]),0===i.length)return t.call(this);u.default.emit("before-import");var o=c(i.length,function(){return u.default.emit("after-import"),t.call(r)}),a=!0,s=!1,l=void 0;try{for(var f,h=i[Symbol.iterator]();!(a=(f=h.next()).done);a=!0){var p=f.value;this._importElement(n,p,o)}}catch(e){s=!0,l=e}finally{try{!a&&h.return&&h.return()}finally{if(s)throw l}}}}]),e}();t.default=l},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(12),s=r(a),u=n(8),c=r(u),l=n(5),f=r(l),h=n(1),p=r(h),d=function(){function e(t){i(this,e),this.storage=new s.default({prefix:t.storagePrefix,persistent:t.cache}),this.cache=t.cache,this.connector=new c.default,this.sanitizer=new f.default}return o(e,[{key:"generateRequestUrl",value:function(e){return"componentsPages/"+e+".json"}},{key:"get",value:function(e,t){var n=this.storage.getItem(e);return this.cache&&n?new Promise(function(e){e(n)}):this._getFromConnector(e,t)}},{key:"_getFromConnector",value:function(e,t){t=t||{},t.url=this.generateRequestUrl(e,t.params),p.default.emit("page-request",t);var n=this.connector.getJSON(t);return n.then(this._onResponse.bind(this,e,t)).catch(function(e){return e.message})}},{key:"_onResponse",value:function(e,t,n){n.page=e,p.default.emit("page-response",n);var r=this.sanitizer.parse(n);return this.storage.setItem(e,r),p.default.emit("data-load",r),r}}]),e}();t.default=d},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(t){n(this,e),this.prefix="",this.persistent=!1,r(this,t),this.persistent&&this.clear()}return i(e,[{key:"getItem",value:function(e){return JSON.parse(this.storage.getItem(this.prefix+e))}},{key:"setItem",value:function(e,t){this.storage.setItem(this.prefix+e,JSON.stringify(t,"",!0))}},{key:"clear",value:function(){var e=new RegExp("^("+this.prefix+")");for(var t in this.storage)e.test(t)&&this.storage.removeItem(t)}},{key:"storage",get:function(){return this.persistent?window.localStorage:window.sessionStorage}}]),e}();t.default=o},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(16),s=r(a),u=n(1),c=r(u),l=function(){function e(){i(this,e),this.cache={},this.templates={},this.selected=""}return o(e,[{key:"create",value:function(e,t){var n=this.get(e);if(!n){n=new s.default(t),n.name=e;var r=n.node;this.cache[e]=n,this.templates[e]=r,r.id=this.parseTemplateId(e),r.name=this.parseTemplateName(e),n.setProps()}return n}},{key:"get",value:function(e){return this.cache[e]}},{key:"getNode",value:function(e){return this.templates[e]}},{key:"parseTemplateName",value:function(e){return e}},{key:"parseTemplateId",value:function(e){return"cells-template-"+e.replace(/\./g,"-")}},{key:"select",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,n=this.get(e),r=this.cache,i=void 0;for(var o in r)o===this.selected?(i=o,r[o].deactivate()):e!==o&&r[o].cache();this.selected=e,n.activate(),t&&(t.updateAppContext(i,e),t.initPrivateChannel(i,e)),c.default.emit("template-transition-end",n)}}]),e}();t.default=l},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(t,r){n(this,e),this.name="",this.pattern="",this.regexp=null,this.name=t,this.pattern=r;var i=r.replace(e.PARAM,"([^/]+)").replace(e.TRAILING_SLASHES,"/*");this.regexp=new RegExp("^"+i+"$");for(var o,a=[];null!==(o=e.PARAM.exec(r));)a.push(o[1]);this.keys=a}return r(e,[{key:"path",value:function t(n){n=n||{},this.params={};for(var r,t=this.pattern;null!==(r=e.PARAM.exec(this.pattern));)t=t.replace(r[0],n[r[1]]),this.params[r[1]]=n[r[1]];var i=[];for(var o in n)this.params.hasOwnProperty(o)||i.push(o+"="+encodeURIComponent(n[o]));return i.length&&(t+="?"+i.join("&")),t}},{key:"matchPath",value:function(e){return e.match(this.regexp)}},{key:"parsePath",value:function(t){var n=this.matchPath(t);if(this.params={},n)for(var r,i=1;null!==(r=e.PARAM.exec(this.pattern));)this.params[r[1]]=this._parseParam(n[i]),i++}},{key:"parseQuery",value:function(e){this.query=e;for(var t in this.query)this.params[t]=this.query[t]}},{key:"_isNumber",value:function(e){return""!==e&&null!==e&&!isNaN(e)&&"number"==typeof e}},{key:"_parseParam",value:function(e){return this._isNumber(e)&&(e=+e),e}},{key:"handler",value:function(){}}]),e}();i.PARAM=/(?:\:([^\/]+))/g,i.TRAILING_SLASHES=/\/*$/,t.default=i},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(14),u=r(s),c=null,l=!1,f={},h=void 0,p=void 0,d=function(){function e(){return i(this,e),c||(c=this),c}return a(e,[{key:"handler",value:function(e){}},{key:"addRoute",value:function(e,t){return this.routes[e]=new u.default(e,t),this.routes[e]}},{key:"addRoutes",value:function(e){var t={};for(var n in e)t[n]=this.addRoute(n,e[n]);return t}},{key:"_getHashPath",value:function(){return location.hash.replace(e.HASH_PREFIX,"/").replace(e.EMPTY,"/")}},{key:"_observeHashChange",value:function(){return Rx.Observable.fromEvent(window,"hashchange").map(this._getHashPath).startWith(this._getHashPath())}},{key:"_getURLPath",value:function(){return location.pathname.replace(e.PATH_PREFIX,"/")}},{key:"_observeStateChange",value:function(){return Rx.Observable.merge(Rx.Observable.fromEvent(window,"popstate"),Rx.Observable.fromEvent(window,"pushstate")).map(this._getURLPath).startWith(this._getURLPath())}},{key:"matchRoute",value:function(e){var t,n=e.split("?"),r=o(n,2),i=r[0],a=r[1];a=this._parseQuery(a);for(var s in this.routes)if(t=this.routes[s],t.matchPath(i))return t.parsePath(i),t.parseQuery(a),t}},{key:"_parseQuery",value:function(e){var t={};if(e){var n=e.split("&");if(n){var r=void 0,i=void 0,a=void 0,s=n.length;for(a=0;a<s;a++){var u=n[a].split("="),c=o(u,2);r=c[0],i=c[1],t[r]=decodeURIComponent(i)}}}return t}},{key:"start",value:function(){var e=this;if(!h){var t=new Rx.SerialDisposable,n=this.useHistory?this._observeStateChange():this._observeHashChange(),r=n.distinctUntilChanged().map(this.matchRoute.bind(this)).forEach(function(n){if(n){p=n;var r=Rx.Disposable.create(function(){return e.currentRoute});t.setDisposable(r),e.currentRoute.handler(),e.handler(e.currentRoute)}});h=new Rx.CompositeDisposable(r,t)}return h}},{key:"stop",value:function(){h&&(h.dispose(),h=null)}},{key:"destroy",value:function(){this.stop(),this.routes={}}},{key:"getPath",value:function(e,t){var n=this.routes[e];return n?n.path(t):void console.error("Wrong route name: %s, valid route names: %s",e,Object.keys(this.routes).join(", "))}},{key:"go",value:function(t,n,r){var i=t.replace(e.LTRIM_SLASH,""),o=this.getPath(i,n);o!==this._getHashPath()&&(this.useHistory?r?this.historyReplaceState(o):this.historyPushState(o):r?this.locationReplace(o):this.locationHash(o))}},{key:"goReplacing",value:function(e,t){this.go(e,t,!0)}},{key:"historyReplaceState",value:function(e){history.replaceState(null,null,e)}},{key:"historyPushState",value:function(e){history.pushState(null,null,e)}},{key:"locationReplace",value:function(e){location.replace("#!"+e)}},{key:"locationHash",value:function(e){location.hash="#!"+e}},{key:"useHistory",set:function(t){e.SUPPORTS_HISTORY_API&&(l=t)},get:function(){return l}},{key:"routes",set:function(e){f=e},get:function(){return f}},{key:"currentRoute",get:function(){return p}}]),e}();d.SUPPORTS_HISTORY_API=window.history&&"pushState"in window.history,d.PARAM=/(?:\:([^\/]+))/g,d.LTRIM_SLASH=/^\/(\b)/,d.EMPTY=/^$/,d.HASH_PREFIX=/^#\!?\/*/,d.PATH_PREFIX=/^\/*/,t.default=d},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(3),c=r(u),l=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.children=null,n.type="TEMPLATE",n.children=[],n}return a(t,e),s(t,[{key:"getZone",value:function(e){var t,n=this.node;return t=n.$&&n.$[e]?n.$[e]:e?n.querySelector("#"+e):n,t||n}},{key:"cache",value:function(){this.node.setAttribute("state","cached")}},{key:"activate",value:function(){this.node.setAttribute("state","active")}},{key:"deactivate",value:function(){this.node.setAttribute("state","inactive")}},{key:"append",value:function(e){if(e){e.length||(e=[e]),this.children=this.children.concat(e);var t=!0,n=!1,r=void 0;try{for(var i,o=e[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var a=i.value;this.getZone(a.zone).appendChild(a.node)}}catch(e){n=!0,r=e}finally{try{!t&&o.return&&o.return()}finally{if(n)throw r}}}}}]),t}(c.default);t.default=l},function(e,t){"use strict";function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function r(e){return"function"==typeof e}function i(e){return"number"==typeof e}function o(e){return"object"===("undefined"==typeof e?"undefined":s(e))&&null!==e}function a(e){return void 0===e}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};e.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(e){if(!i(e)||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},n.prototype.emit=function(e){var t,n,i,s,u,c;if(this._events||(this._events={}),"error"===e&&(!this._events.error||o(this._events.error)&&!this._events.error.length)){if(t=arguments[1],t instanceof Error)throw t;var l=new Error('Uncaught, unspecified "error" event. ('+t+")");throw l.context=t,l}if(n=this._events[e],a(n))return!1;if(r(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:s=Array.prototype.slice.call(arguments,1),n.apply(this,s)}else if(o(n))for(s=Array.prototype.slice.call(arguments,1),c=n.slice(),i=c.length,u=0;u<i;u++)c[u].apply(this,s);return!0},n.prototype.addListener=function(e,t){var i;if(!r(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,r(t.listener)?t.listener:t),this._events[e]?o(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,o(this._events[e])&&!this._events[e].warned&&(i=a(this._maxListeners)?n.defaultMaxListeners:this._maxListeners,i&&i>0&&this._events[e].length>i&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace())),this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(e,t){function n(){this.removeListener(e,n),i||(i=!0,t.apply(this,arguments))}if(!r(t))throw TypeError("listener must be a function");var i=!1;return n.listener=t,this.on(e,n),this},n.prototype.removeListener=function(e,t){var n,i,a,s;if(!r(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(n=this._events[e],a=n.length,i=-1,n===t||r(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(o(n)){for(s=a;s-- >0;)if(n[s]===t||n[s].listener&&n[s].listener===t){i=s;break}if(i<0)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(i,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},n.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[e],r(n))this.removeListener(e,n);else if(n)for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},n.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?r(this._events[e])?[this._events[e]]:this._events[e].slice():[]},n.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(r(t))return 1;if(t)return t.length}return 0},n.listenerCount=function(e,t){return e.listenerCount(t)}},function(e,t){"use strict";function n(e,t){for(var n=0,r=e.indexOf(t);r>=0;)n+=1,r=e.indexOf(t,r+1);return n}e.exports=n},function(e,t){"use strict";function n(e,t,n,r){if("undefined"==typeof n)var n=-1;var i=e.split(t),o=i.slice(0,n),a=i.slice(n);return i=0===a.length?o:o.concat(a.join(t)),"undefined"==typeof r?i:r<0?i.slice(r):i.slice(0,r)}e.exports=n},function(e,t){"use strict";function n(e,t,n,r){if("undefined"==typeof n)var n=-1;if("undefined"==typeof r)var r=0;for(var i=[e],o=e.length-1;o>=0;o--)0===i[0].slice(o).indexOf(t)&&(i.length<=n||n===-1)&&(i.splice(1,0,i[0].slice(o+t.length)),i[0]=i[0].slice(0,o));return r>=0?i.slice(-r):i.slice(0,-r)}e.exports=n},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(r):void 0},l=n(7),f=r(l),h=n(22),p=r(h),d=function(e){function t(){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),u(t,[{key:"_initDependencies",value:function(e){e=s({ComponentConnector:p.default
},e),c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_initDependencies",this).call(this,e)}}]),t}(f.default);t.default=d},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(r):void 0},c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l=n(2),f=r(l),h=function(e){var t;return e.endsWith(Polymer.Base._EVENT_CHANGED)&&(t=e.slice(0,-Polymer.Base._EVENT_CHANGED.length),t=Polymer.CaseMap.dashToCamelCase(t)),t},p=function(e,t,n){var r,i,o=h(e.type);return o&&e.detail&&e.detail.hasOwnProperty("value")?(i=e.detail.value,t=t||o,r=e.detail.path?e.detail.path.replace(o,t):t):(r=t,i=e.detail),void 0!==n&&void 0===n.is&&"object"===("undefined"==typeof i?"undefined":c(i))&&(void 0===Polymer.Element?i=JSON.stringify(i):n instanceof Polymer.Element==0&&(i=JSON.stringify(i))),{path:r,value:i}},d=function(e){function t(){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),s(t,[{key:"wrapCallback",value:function(e,t){return function(n){"function"==typeof e[t]?this._dispatchActionFunction(n,e,t):this._dispatchActionProperty(n,e,t)}.bind(this)}},{key:"_dispatchActionFunction",value:function(e,t,n){var r,i=h(e.type);r=i&&e.detail&&e.detail.hasOwnProperty("value")?Polymer.dom(e).rootTarget[i]:e.detail,this.bridge&&this.bridge.debug&&this.bridge.parsePayload&&(""+t[n]).indexOf(".data")>-1&&(r=this.bridge.parsePayload(e.detail),console.warn("%c"+t.tagName+"%c is using an incompatible payload data in "+n,"background: #ff9800; color: white; padding: 4px 4px 4px 10px","background: #ff9800; color: rgba(255,255,255,0.9); padding: 4px 10px 4px 0")),t[n](r)}},{key:"_dispatchActionProperty",value:function(e,t,n){var r,i=p(e,n,t);return(t&&t.getPropertyInfo||void 0!==Polymer.Element&&t instanceof Polymer.Element==0)&&(r=t.getPropertyInfo?t.getPropertyInfo(i.path):t.constructor.config.properties[i.path],r&&r.defined&&!r.readOnly&&!r.computed)?t.set(i.path,i.value):(t&&void 0===t.getPropertyInfo||void 0!==Polymer.Element&&t instanceof Polymer.Element==0)&&(r=void 0!==t.constructor.config?t.constructor.config.properties[i.path]:void 0,r&&!r.readOnly&&!r.computed)?t.set(i.path,i.value):t.setAttribute(i.path,i.value)}},{key:"register",value:function(e,n){if(u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"register",this).call(this,e,n),e&&n&&!e.__isCellsConnected){if(n.in)for(var r in n.in)this.manager.get(r).q[0]&&(n.ignoreAttr?n.ignoreAttr.push(n.in[r].bind):n.ignoreAttr=[n.in[r].bind]);if(n.out)for(var i in n.out){var o=h(n.out[i].bind);if(o&&e.__data__&&e&&e.getPropertyInfo){var a=e.getPropertyInfo(o);if(a.defined&&!a.readOnly&&!a.computed){var s=e[o];e.__data__[o]=void 0,e[o]=s}}}e.__isCellsConnected=!0}}}]),t}(f.default);t.default=d}])});